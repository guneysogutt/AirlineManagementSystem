{"ast":null,"code":"var _jsxFileName = \"/Users/guneysogut/guney/projects/AMS/ams/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { axios } from '../index';\nimport { useAuth } from '../hooks/useAuth';\nimport Stack from '@mui/material/Stack';\nimport Paper from '@mui/material/Paper';\nimport Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport Link from '@mui/material/Link';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [nationalId, setNationalId] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [is_employee, setIsEmployee] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [authFailed, setAuthFailed] = useState(false);\n  const [error, setError] = useState(false);\n  const handleClick = _ => {\n    setError(false);\n    setAuthFailed(false);\n    setLoading(true);\n    const key = is_employee ? nationalId : email;\n    axios.post('/login', {\n      is_employee,\n      key,\n      password\n    }).then(({\n      data: {\n        token\n      }\n    }) => {\n      var _location$state;\n      login({\n        token,\n        is_employee\n      });\n      if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.redirect) {\n        navigate(location.state.redirect, {\n          replace: true\n        });\n      } else {\n        navigate('/', {\n          replace: true\n        });\n      }\n    }).catch(error => {\n      if (error.response) {\n        setAuthFailed(true);\n      } else {\n        setError(true);\n      }\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    sx: {\n      width: '320px',\n      p: 2\n    },\n    variant: \"outlined\",\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      sx: {\n        width: '100%'\n      },\n      spacing: 2,\n      justifyContent: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        children: \"Welcome!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        level: \"body2\",\n        color: \"#7B91A7\",\n        children: \"Please sign in to continue.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), is_employee ? /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"National id\",\n        size: \"small\",\n        value: nationalId,\n        onChange: e => setNationalId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"Email\",\n        type: \"email\",\n        size: \"small\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"Password\",\n        type: \"password\",\n        size: \"small\",\n        helperText: \"Please check your credentials.\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n        exclusive: true,\n        color: \"primary\",\n        size: \"small\",\n        fullWidth: true,\n        value: is_employee ? 'employee' : 'user',\n        onChange: (e, v) => setIsEmployee(v === 'employee'),\n        children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n          value: \"user\",\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n          value: \"employee\",\n          children: \"Employee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        loading: loading,\n        disabled: loading,\n        variant: \"contained\",\n        onClick: handleClick,\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        fontSize: \"small\",\n        sx: {\n          alignSelf: 'center'\n        },\n        children: [\"Don't have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          underline: \"none\",\n          href: \"/signup\",\n          children: \" Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: error,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          variant: \"filled\",\n          children: \"An error occurred while requesting credentials.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"J/aI8sAjXsu+0Uwzm3LSJ8AML9s=\", false, function () {\n  return [useAuth, useNavigate, useLocation];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useLocation","useNavigate","axios","useAuth","Stack","Paper","Snackbar","Alert","LoadingButton","ToggleButton","ToggleButtonGroup","TextField","Typography","Link","jsxDEV","_jsxDEV","Login","_s","login","navigate","location","nationalId","setNationalId","email","setEmail","password","setPassword","is_employee","setIsEmployee","loading","setLoading","authFailed","setAuthFailed","error","setError","handleClick","_","key","post","then","data","token","_location$state","state","redirect","replace","catch","response","finally","sx","width","p","variant","children","spacing","justifyContent","fileName","_jsxFileName","lineNumber","columnNumber","level","color","label","size","value","onChange","e","target","type","helperText","exclusive","fullWidth","v","disabled","onClick","fontSize","alignSelf","underline","href","open","severity","_c","$RefreshReg$"],"sources":["/Users/guneysogut/guney/projects/AMS/ams/src/components/Login.js"],"sourcesContent":["import { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { axios } from '../index';\nimport { useAuth } from '../hooks/useAuth';\n\nimport Stack from '@mui/material/Stack';\nimport Paper from '@mui/material/Paper';\nimport Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport Link from '@mui/material/Link';\n\nexport default function Login() {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [nationalId, setNationalId] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [is_employee, setIsEmployee] = useState(false);\n\n  const [loading, setLoading] = useState(false);\n  const [authFailed, setAuthFailed] = useState(false);\n  const [error, setError] = useState(false);\n\n  const handleClick = (_) => {\n    setError(false);\n    setAuthFailed(false);\n    setLoading(true);\n\n    const key = is_employee ? nationalId : email;\n\n    axios.post('/login', { is_employee, key, password })\n      .then(({ data: { token } }) => {\n        login({ token, is_employee });\n\n        if (location.state?.redirect) {\n          navigate(location.state.redirect, { replace: true });\n        } else {\n          navigate('/', { replace: true });\n        }\n      })\n      .catch(error => {\n        if (error.response) {\n          setAuthFailed(true)\n        } else {\n          setError(true)\n        }\n      })\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <Paper sx={{ width: '320px', p: 2 }} variant=\"outlined\">\n      <Stack sx={{ width: '100%' }} spacing={2} justifyContent=\"center\">\n        <Typography variant=\"h4\">\n          Welcome!\n        </Typography>\n\n        <Typography level=\"body2\" color=\"#7B91A7\">\n          Please sign in to continue.\n        </Typography>\n\n        {\n          is_employee\n            ? <TextField\n              error={authFailed}\n              label=\"National id\"\n              size=\"small\"\n              value={nationalId}\n              onChange={(e) => setNationalId(e.target.value)}\n            />\n            : <TextField\n              error={authFailed}\n              label=\"Email\"\n              type='email'\n              size=\"small\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n        }\n\n        <TextField\n          error={authFailed}\n          label=\"Password\"\n          type='password'\n          size=\"small\"\n          helperText=\"Please check your credentials.\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <ToggleButtonGroup\n          exclusive\n          color=\"primary\"\n          size='small'\n          fullWidth\n          value={is_employee ? 'employee' : 'user'}\n          onChange={(e, v) => setIsEmployee(v === 'employee')}\n        >\n          <ToggleButton value=\"user\">User</ToggleButton>\n          <ToggleButton value=\"employee\">Employee</ToggleButton>\n        </ToggleButtonGroup>\n\n        <LoadingButton\n          loading={loading}\n          disabled={loading}\n          variant='contained'\n          onClick={handleClick}\n        >\n          Log in\n        </LoadingButton>\n\n        <Typography\n          fontSize=\"small\"\n          sx={{ alignSelf: 'center' }}\n        >\n          Don&apos;t have an account?\n          <Link underline=\"none\" href=\"/signup\"> Sign up</Link>\n        </Typography>\n\n        <Snackbar open={error}>\n          <Alert severity=\"error\" variant='filled'>\n            An error occurred while requesting credentials.\n          </Alert>\n        </Snackbar>\n      </Stack>\n    </Paper>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}