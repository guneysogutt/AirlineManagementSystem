{"ast":null,"code":"var _jsxFileName = \"/Users/guneysogut/guney/projects/AMS/ams/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { axios } from '../index';\nimport { useAuth } from '../hooks/useAuth';\nimport Stack from '@mui/material/Stack';\nimport Paper from '@mui/material/Paper';\nimport Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport Link from '@mui/material/Link';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const {\n    login\n  } = useAuth();\n  const [nationalId, setNationalId] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [is_employee, setIsEmployee] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [authFailed, setAuthFailed] = useState(false);\n  const [error, setError] = useState(false);\n  const handleClick = _ => {\n    setError(false);\n    setAuthFailed(false);\n    setLoading(true);\n    const key = is_employee ? nationalId : email;\n    axios.post('/login', {\n      is_employee,\n      key,\n      password\n    }).then(({\n      data: {\n        token\n      }\n    }) => {\n      login({\n        token,\n        is_employee\n      });\n    }).catch(error => {\n      if (error.response) {\n        setAuthFailed(true);\n      } else {\n        setError(true);\n        console.log(error);\n      }\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    sx: {\n      width: '320px',\n      p: 2\n    },\n    variant: \"outlined\",\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      sx: {\n        width: '100%'\n      },\n      spacing: 2,\n      justifyContent: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        children: \"Welcome!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        level: \"body2\",\n        color: \"#7B91A7\",\n        children: \"Please sign in to continue.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), is_employee ? /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"National id\",\n        size: \"small\",\n        value: nationalId,\n        onChange: e => setNationalId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"Email\",\n        type: \"email\",\n        size: \"small\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        error: authFailed,\n        label: \"Password\",\n        type: \"password\",\n        size: \"small\",\n        helperText: \"Please check your credentials.\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n        exclusive: true,\n        color: \"primary\",\n        size: \"small\",\n        fullWidth: true,\n        value: is_employee ? 'employee' : 'user',\n        onChange: (e, v) => setIsEmployee(v === 'employee'),\n        children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n          value: \"user\",\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n          value: \"employee\",\n          children: \"Employee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        loading: loading,\n        disabled: loading,\n        variant: \"contained\",\n        onClick: handleClick,\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        fontSize: \"small\",\n        sx: {\n          alignSelf: 'center'\n        },\n        children: [\"Don't have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          underline: \"none\",\n          href: \"/signup\",\n          children: \" Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: error,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          variant: \"filled\",\n          children: \"An error occurred while requesting credentials.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"+tc5+ryysBdsFkI3h3Axcy8APhY=\", false, function () {\n  return [useAuth];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","axios","useAuth","Stack","Paper","Snackbar","Alert","LoadingButton","ToggleButton","ToggleButtonGroup","TextField","Typography","Link","jsxDEV","_jsxDEV","Login","_s","login","nationalId","setNationalId","email","setEmail","password","setPassword","is_employee","setIsEmployee","loading","setLoading","authFailed","setAuthFailed","error","setError","handleClick","_","key","post","then","data","token","catch","response","console","log","finally","sx","width","p","variant","children","spacing","justifyContent","fileName","_jsxFileName","lineNumber","columnNumber","level","color","label","size","value","onChange","e","target","type","helperText","exclusive","fullWidth","v","disabled","onClick","fontSize","alignSelf","underline","href","open","severity","_c","$RefreshReg$"],"sources":["/Users/guneysogut/guney/projects/AMS/ams/src/components/Login.js"],"sourcesContent":["import { useState } from 'react';\nimport { axios } from '../index';\nimport { useAuth } from '../hooks/useAuth';\n\nimport Stack from '@mui/material/Stack';\nimport Paper from '@mui/material/Paper';\nimport Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport Link from '@mui/material/Link';\n\nexport default function Login() {\n  const { login } = useAuth();\n\n  const [nationalId, setNationalId] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [is_employee, setIsEmployee] = useState(false);\n\n  const [loading, setLoading] = useState(false);\n  const [authFailed, setAuthFailed] = useState(false);\n  const [error, setError] = useState(false);\n\n  const handleClick = (_) => {\n    setError(false);\n    setAuthFailed(false);\n    setLoading(true);\n\n    const key = is_employee ? nationalId : email;\n\n    axios.post('/login', { is_employee, key, password })\n      .then(({ data: { token } }) => {\n        login({ token, is_employee });\n      })\n      .catch(error => {\n        if (error.response) {\n          setAuthFailed(true)\n        } else {\n          setError(true)\n          console.log(error);\n        }\n      })\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <Paper sx={{ width: '320px', p: 2 }} variant=\"outlined\">\n      <Stack sx={{ width: '100%' }} spacing={2} justifyContent=\"center\">\n        <Typography variant=\"h4\">\n          Welcome!\n        </Typography>\n\n        <Typography level=\"body2\" color=\"#7B91A7\">\n          Please sign in to continue.\n        </Typography>\n\n        {\n          is_employee\n            ? <TextField\n              error={authFailed}\n              label=\"National id\"\n              size=\"small\"\n              value={nationalId}\n              onChange={(e) => setNationalId(e.target.value)}\n            />\n            : <TextField\n              error={authFailed}\n              label=\"Email\"\n              type='email'\n              size=\"small\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n        }\n\n        <TextField\n          error={authFailed}\n          label=\"Password\"\n          type='password'\n          size=\"small\"\n          helperText=\"Please check your credentials.\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <ToggleButtonGroup\n          exclusive\n          color=\"primary\"\n          size='small'\n          fullWidth\n          value={is_employee ? 'employee' : 'user'}\n          onChange={(e, v) => setIsEmployee(v === 'employee')}\n        >\n          <ToggleButton value=\"user\">User</ToggleButton>\n          <ToggleButton value=\"employee\">Employee</ToggleButton>\n        </ToggleButtonGroup>\n\n        <LoadingButton\n          loading={loading}\n          disabled={loading}\n          variant='contained'\n          onClick={handleClick}\n        >\n          Log in\n        </LoadingButton>\n\n        <Typography\n          fontSize=\"small\"\n          sx={{ alignSelf: 'center' }}\n        >\n          Don&apos;t have an account?\n          <Link underline=\"none\" href=\"/signup\"> Sign up</Link>\n        </Typography>\n\n        <Snackbar open={error}>\n          <Alert severity=\"error\" variant='filled'>\n            An error occurred while requesting credentials.\n          </Alert>\n        </Snackbar>\n      </Stack>\n    </Paper>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}